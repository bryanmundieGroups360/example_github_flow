name: Publish

on: release

jobs:
  build:
    name: Publish binaries
    runs-on: ubuntu-latest

    steps:
      - name: Build Asset
        run: |
          echo "test" > build.js
      - name: Upload Assets
        uses: "actions/github-script@v7"
        with:
          script: |
            try {
              return await github.rest.repos.uploadReleaseAsset({
                owner: context.repo.owner,
                repo: context.repo.repo,
                name: "builld.js",
                release_id: ${{ fromJSON(steps.deploy.outputs.result).data.id }}
                data: 
              })
            } catch (error) {
              core.setFailed(error.message);
            }